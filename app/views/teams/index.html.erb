<h1>Teams <%=@club.name%></h1>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Heats</th>
      <th>Name</th>
      <th>Boat type</th>
      <th>Rowers</th>
      <th>Rank</th>
      <th>Results</th>
    </tr>
  </thead>

  <tbody>
  <% @club.teams.each do |team| %>
    <tr>
      <td>
        <% team.heats.each do |heat| %>
        <%= link_to heat.name, heat_url(heat) %>
        <% end %>
      </td>
      <td><%= team.name %></td>
      <td><%= team.boat_type.name %></td>
      <td>
        <% team.rowers.each do |rower| %>
        <%= rower.name %>
        <% end %>
      </td>
        <% if team.results.present? %>
      <td>
        <%= team.results.first.rank %>
      </td>
      <td>
        (<% team.results.each do |result| %>
        <%= result.laptime %> ,
        <% end %>)
      </td>
        <% else %>
          <% ((@club.teams.map {|x| x.results.count }).max + 1).times do %>
            <td></td>
          <% end %>
        <% end %>
    </tr>
  <% end %>
  </tbody>
</table>

